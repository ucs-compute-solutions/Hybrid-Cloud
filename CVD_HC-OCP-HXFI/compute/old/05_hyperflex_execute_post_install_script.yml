---
### This task is incomplete *****

- name: Define anchor for Intersight API login info 
  set_fact:
    intersight_api_login_info: &intersight_api_login_info
      api_private_key:         "{{ intersight_api_private_key }}"
      api_key_id:              "{{ intersight_api_key_id }}"
      api_uri:                 "{{ intersight_api_uri | default(omit) }}"
      validate_certs:          "{{ intersight_validate_certs | default(omit) }}"
      #state:                  "{{ intersight_state | default(omit) }}"

- debug:
    msg: "API Info is: {{ intersight_api_login_info }}"
  tags: [never, debug]

- name: Execute post-install script on HyperFlex storage controller VM 
  script: hx_post_install
  tags: 
    - organization
    #- never


use EXPECT module: https://docs.ansible.com/ansible/latest/modules/expect_module.html

- name: Case insensitive unique id string match
  expect:
    command: ./myscript.sh
    responses:
      "Please enter your uniqueid": "myID"
      # Your input in myscript.sh
  no_log: true


  U can parse content from your text file to string variable and afterwards run expect&command with "with_items" option, example, if yours ids in file comma separated, then u can add: with_items: {{ myStringVar.split(',') }}, and in responses specify item: "Please enter your uniqueid": "{{ item }}" â€“ 
TheDESTROS
